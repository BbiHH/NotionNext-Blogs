<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini çµæ„Ÿå·¥åŠ | æˆ‘çš„åˆ›æ„è§’è½</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Lucide å›¾æ ‡åº“ -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- å¼•å…¥ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f3f4f6;
            background-image: 
                radial-gradient(at 40% 20%, hsla(28,100%,74%,0.1) 0px, transparent 50%),
                radial-gradient(at 80% 0%, hsla(189,100%,56%,0.1) 0px, transparent 50%),
                radial-gradient(at 0% 50%, hsla(340,100%,76%,0.1) 0px, transparent 50%);
            min-height: 100vh;
        }

        /* éšè—æ»šåŠ¨æ¡ä½†å…è®¸æ»šåŠ¨ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .card-hover {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.1);
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .fun-font {
            font-family: 'ZCOOL KuaiLe', cursive;
        }

        /* æ¨¡æ€æ¡†åŠ¨ç”» */
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-animateing {
            animation: modalIn 0.2s ease-out forwards;
        }
        
        /* å½•åˆ¶ä¸­çš„çº¢ç‚¹åŠ¨ç”» */
        .recording-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #ef4444;
            border-radius: 50%;
            margin-right: 6px;
            animation: pulse-red 1.5s infinite;
        }
        @keyframes pulse-red {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
    </style>
</head>
<body class="text-gray-700">

    <!-- å¯¼èˆªæ  -->
    <nav class="glass-nav fixed top-0 w-full z-40 px-6 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <div class="bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg text-white shadow-md">
                <i data-lucide="sparkles" size="20"></i>
            </div>
            <span class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600 fun-font tracking-wider">
                Gemini çµæ„Ÿå·¥åŠ
            </span>
        </div>
        <div class="hidden md:flex items-center space-x-6 text-sm font-medium text-gray-500">
            <a href="#" class="hover:text-purple-600 transition-colors">å…³äºæˆ‘</a>
            <a href="#" class="hover:text-purple-600 transition-colors">ä½¿ç”¨æŒ‡å—</a>
            <button class="bg-gray-900 text-white px-4 py-2 rounded-full hover:bg-gray-800 transition-colors text-xs">
                è”ç³»ä½œè€…
            </button>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="pt-24 pb-12 px-4 md:px-8 max-w-7xl mx-auto">
        
        <!-- æ¯æ—¥çµæ„Ÿ / æ¬¢è¿åŒº -->
        <section class="mb-12 bg-white rounded-3xl p-8 shadow-sm border border-white/50 relative overflow-hidden">
            <div class="absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-yellow-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-pulse"></div>
            <div class="absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-pulse" style="animation-delay: 2s"></div>
            
            <div class="relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
                <div>
                    <div class="flex items-center gap-2 text-yellow-600 font-medium mb-2 text-sm">
                        <i data-lucide="sun" size="16"></i>
                        <span>ä»Šæ—¥çµæ„Ÿå°ç­¾</span>
                    </div>
                    <h1 class="text-2xl md:text-4xl font-bold text-gray-800 mb-3 fun-font" id="daily-quote">
                        "å¥½å¥‡å¿ƒæ˜¯é€šå¾€æ–°ä¸–ç•Œçš„é’¥åŒ™ã€‚"
                    </h1>
                    <p class="text-gray-500 max-w-2xl">
                        è¿™é‡Œå­˜æ”¾ç€æˆ‘ä¸ Gemini å¯¹è¯ä¸­è¯ç”Ÿçš„å¥‡æ€å¦™æƒ³ã€‚æ¯ä¸€ä¸ªå¡ç‰‡èƒŒåï¼Œéƒ½è—ç€ä¸€ä¸ªå°çŸ¥è¯†æˆ–æ˜¯ä¸€æ®µæœ‰è¶£çš„äº’åŠ¨ä»£ç ã€‚
                    </p>
                </div>
                <div class="bg-white/80 backdrop-blur p-4 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4">
                    <div class="bg-blue-100 p-3 rounded-full text-blue-600">
                        <i data-lucide="code-2" size="24"></i>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400 uppercase font-bold tracking-wide">é¡¹ç›®æ€»æ•°</p>
                        <p class="text-2xl font-bold text-gray-800" id="total-count">0</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç­›é€‰åˆ†ç±» -->
        <div class="flex flex-wrap gap-3 mb-8 overflow-x-auto no-scrollbar pb-2" id="filter-container">
            <button class="filter-btn active px-5 py-2 rounded-full text-sm font-medium bg-gray-900 text-white shadow-lg transform transition-transform hover:scale-105" data-category="all">
                å…¨éƒ¨å±•ç¤º
            </button>
            <button class="filter-btn px-5 py-2 rounded-full text-sm font-medium bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 transition-colors" data-category="animation">
                âœ¨ ç¥å¥‡åŠ¨ç”»
            </button>
            <button class="filter-btn px-5 py-2 rounded-full text-sm font-medium bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 transition-colors" data-category="knowledge">
                ğŸ“š çŸ¥è¯†è®²è§£
            </button>
            <button class="filter-btn px-5 py-2 rounded-full text-sm font-medium bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 transition-colors" data-category="tool">
                ğŸ› ï¸ å®ç”¨å°å·¥å…·
            </button>
             <button class="filter-btn px-5 py-2 rounded-full text-sm font-medium bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 transition-colors" data-category="game">
                ğŸ® è¿·ä½ æ¸¸æˆ
            </button>
        </div>

        <!-- å¡ç‰‡ç½‘æ ¼ -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="projects-grid">
            <!-- å¡ç‰‡å°†é€šè¿‡ JS åŠ¨æ€æ’å…¥ -->
        </div>

        <!-- ç©ºçŠ¶æ€æç¤º (é»˜è®¤éšè—) -->
        <div id="empty-state" class="hidden text-center py-20">
            <div class="inline-block p-4 bg-gray-100 rounded-full mb-4">
                <i data-lucide="search" size="32" class="text-gray-400"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³é¡¹ç›®</h3>
            <p class="text-gray-500">æ¢ä¸ªåˆ†ç±»è¯•è¯•çœ‹å§ï¼</p>
        </div>

    </main>

    <!-- åº•éƒ¨ -->
    <footer class="bg-white border-t border-gray-100 py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center">
            <div class="text-sm text-gray-500 mb-4 md:mb-0">
                &copy; 2023 Gemini çµæ„Ÿå·¥åŠ. æ‰€æœ‰çš„ä»£ç éƒ½å……æ»¡äº†çˆ±ä¸é€»è¾‘ã€‚
            </div>
            <div class="flex space-x-4">
                <a href="#" class="text-gray-400 hover:text-purple-600 transition-colors"><i data-lucide="github" size="20"></i></a>
                <a href="#" class="text-gray-400 hover:text-purple-600 transition-colors"><i data-lucide="twitter" size="20"></i></a>
            </div>
        </div>
    </footer>

    <!-- æ¨¡æ‹Ÿåº”ç”¨æ‰“å¼€çš„æ¨¡æ€æ¡† -->
    <div id="app-modal" class="fixed inset-0 z-50 hidden">
        <!-- èƒŒæ™¯é®ç½© -->
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        
        <!-- æ¨¡æ€æ¡†å†…å®¹ -->
        <div class="absolute inset-0 flex items-center justify-center p-4 pointer-events-none">
            <div class="bg-white w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col pointer-events-auto modal-animateing relative overflow-hidden">
                
                <!-- æ¨¡æ€æ¡†å¤´éƒ¨ -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-white z-10">
                    <div class="flex items-center gap-3">
                        <div id="modal-icon" class="p-2 rounded-lg bg-gray-100 text-gray-600"></div>
                        <div>
                            <h2 id="modal-title" class="text-lg font-bold text-gray-800">æ ‡é¢˜</h2>
                            <p class="text-xs text-gray-500">ç”± Gemini è¾…åŠ©ç”Ÿæˆ</p>
                        </div>
                    </div>
                    
                    <!-- å³ä¾§æ“ä½œæ  -->
                    <div class="flex items-center gap-2">
                        <!-- å½•åˆ¶æŒ‰é’® (æ–°å¢) -->
                        <button id="record-btn" class="flex items-center gap-2 px-3 py-1.5 rounded-full text-gray-500 hover:bg-purple-50 hover:text-purple-600 transition-colors text-sm font-medium border border-transparent hover:border-purple-100" onclick="toggleRecording()" title="å½•åˆ¶å±å¹•ä¸ºè§†é¢‘">
                            <i data-lucide="video" size="18"></i>
                            <span id="record-text" class="hidden sm:inline">å½•åˆ¶è§†é¢‘</span>
                        </button>
                        
                        <div class="w-px h-4 bg-gray-200 mx-2"></div>

                        <button class="text-gray-400 hover:text-gray-600 transition-colors p-1" onclick="toggleFullscreen()" title="å…¨å±">
                            <i data-lucide="maximize-2" size="20"></i>
                        </button>
                        <button class="bg-gray-100 hover:bg-red-50 hover:text-red-500 text-gray-500 p-2 rounded-full transition-colors ml-2" onclick="closeModal()" title="å…³é—­">
                            <i data-lucide="x" size="20"></i>
                        </button>
                    </div>
                </div>

                <!-- æ¨¡æ€æ¡†ä¸»ä½“ (iframe æ¨¡æ‹ŸåŒº) -->
                <div class="flex-1 bg-gray-50 relative flex flex-col items-center justify-center overflow-hidden">
                    
                    <!-- iframe ç”¨äºæ˜¾ç¤ºçœŸå®ç½‘é¡µ -->
                    <iframe id="project-iframe" class="w-full h-full hidden bg-white" frameborder="0"></iframe>

                    <!-- æ¨¡æ‹Ÿå ä½ç¬¦ -->
                    <div id="modal-content-placeholder" class="text-center p-8">
                        <div class="inline-block p-6 rounded-full bg-white shadow-sm mb-6 animate-bounce">
                            <i data-lucide="loader-2" size="48" class="text-purple-500 animate-spin"></i>
                        </div>
                        <h3 class="text-xl font-medium text-gray-700 mb-2">æ­£åœ¨åŠ è½½åˆ›æ„æ¨¡å—...</h3>
                        <p class="text-gray-500 max-w-md mx-auto">
                            åœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œè¿™é‡Œå°†åŠ è½½ä½ ç”Ÿæˆçš„ç‹¬ç«‹ HTML æ–‡ä»¶ã€‚<br>
                            <span class="text-sm bg-yellow-100 text-yellow-800 px-2 py-1 rounded mt-2 inline-block">æ¼”ç¤ºæ¨¡å¼ï¼šç‚¹å‡»å·¦ä¸Šè§’å…³é—­</span>
                        </p>
                        
                        <!-- æ¨¡æ‹Ÿçš„æ¼”ç¤ºå†…å®¹ -->
                        <div class="mt-8 p-6 bg-white rounded-xl shadow-inner border border-gray-100 max-w-2xl mx-auto text-left hidden" id="mock-demo-content">
                            <h4 class="font-bold text-gray-800 mb-2">æ¼”ç¤ºï¼š<span id="demo-title"></span></h4>
                            <p class="text-gray-600 text-sm leading-relaxed" id="demo-desc"></p>
                            <div class="mt-4 h-32 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg border border-dashed border-indigo-200 flex items-center justify-center text-indigo-300">
                                [ åŠ¨ç”»äº¤äº’åŒºåŸŸå ä½ç¬¦ ]
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // 1. é¡¹ç›®æ•°æ® (æ¨¡æ‹Ÿæ•°æ®åº“)
        const projects = [
            {
                id: 1,
                title: "å¤ªé˜³ç³»å¾®ç¼©æ¨¡å‹",
                url: "./projects/gang.html",
                desc: "ä¸€ä¸ªçº¯ CSS+JS å®ç°çš„å¤ªé˜³ç³»è¡Œæ˜Ÿå…¬è½¬æ¼”ç¤ºï¼Œç‚¹å‡»æ˜Ÿçƒå¯ä»¥æŸ¥çœ‹å®ƒçš„ç‰©ç†å‚æ•°ã€‚",
                category: "knowledge",
                icon: "orbit",
                color: "from-blue-500 to-indigo-600",
                tags: ["ç‰©ç†", "å¤©æ–‡", "3DåŠ¨ç”»"],
                date: "2023-10-05"
            },
            {
                id: 2,
                title: "4-7-8 å‘¼å¸å†¥æƒ³",
                desc: "å¸®åŠ©æ”¾æ¾çš„è§†è§‰å¼•å¯¼å·¥å…·ã€‚åœ†åœˆéšç€å‘¼å¸èŠ‚å¥æ”¾å¤§ç¼©å°ï¼Œå¸¦æœ‰èˆ’ç¼“çš„é…è‰²ã€‚",
                category: "tool",
                icon: "wind",
                color: "from-teal-400 to-emerald-500",
                tags: ["å¥åº·", "æ”¾æ¾", "ç”Ÿæ´»"],
                date: "2023-10-08"
            },
            {
                id: 3,
                title: "æ–æ³¢é‚£å¥‘èºæ—‹",
                desc: "å±•ç¤ºé»„é‡‘åˆ†å‰²åœ¨è‡ªç„¶ç•Œä¸­çš„ç¾å¦™ã€‚é€šè¿‡ç”Ÿæˆæ— æ•°ä¸ªæ­£æ–¹å½¢ç»˜åˆ¶å‡ºå®Œç¾çš„èºæ—‹çº¿ã€‚",
                category: "animation",
                icon: "snail",
                color: "from-amber-400 to-orange-500",
                tags: ["æ•°å­¦", "å‡ ä½•", "ç¾å­¦"],
                date: "2023-10-12"
            },
            {
                id: 4,
                title: "ç•ªèŒ„å·¥ä½œæ³•è®¡æ—¶å™¨",
                desc: "å¸¦æœ‰ç™½å™ªéŸ³èƒŒæ™¯éŸ³çš„ä¸“æ³¨è®¡æ—¶å™¨ã€‚æ¯å®Œæˆä¸€ä¸ªç•ªèŒ„é’Ÿï¼Œç•Œé¢ä¼šé•¿å‡ºä¸€é¢—åƒç´ å°æ ‘ã€‚",
                category: "tool",
                icon: "timer",
                color: "from-red-400 to-rose-500",
                tags: ["æ•ˆç‡", "å·¥å…·", "åƒç´ é£"],
                date: "2023-10-15"
            },
            {
                id: 5,
                title: "è‰²å½©å¿ƒç†å­¦",
                desc: "äº¤äº’å¼è‰²å¡ã€‚ç‚¹å‡»é¢œè‰²ï¼Œä¸ä»…ä¼šå…¨å±å˜è‰²ï¼Œè¿˜ä¼šå‘Šè¯‰ä½ è¿™ç§é¢œè‰²ä»£è¡¨çš„æƒ…ç»ªå’Œå«ä¹‰ã€‚",
                category: "knowledge",
                icon: "palette",
                color: "from-pink-400 to-purple-500",
                tags: ["è®¾è®¡", "å¿ƒç†å­¦", "äº’åŠ¨"],
                date: "2023-10-20"
            },
            {
                id: 6,
                title: "æ‰“å­—æœºè¯—æ­Œç”Ÿæˆ",
                desc: "ä¸€ä¸ªå¤å¤é£æ ¼çš„ç½‘é¡µï¼Œæ ¹æ®ä½ è¾“å…¥çš„å…³é”®è¯ï¼ŒGemini å®æ—¶ç”Ÿæˆä¸€é¦–ä¸‰è¡Œè¯—å¹¶é€å­—æ‰“å°ã€‚",
                category: "tool",
                icon: "type",
                color: "from-gray-600 to-gray-800",
                tags: ["æ–‡å­¦", "AI", "å¤å¤"],
                date: "2023-10-22"
            },
            {
                id: 7,
                title: "ç»†èƒåˆ†è£‚æ¨¡æ‹Ÿ",
                desc: "ç”Ÿç‰©è¯¾å°åŠ©æ‰‹ã€‚è§‚å¯Ÿä¸€ä¸ªç»†èƒå¦‚ä½•è¿›è¡Œæœ‰ä¸åˆ†è£‚ï¼Œä½ å¯ä»¥æ§åˆ¶åˆ†è£‚çš„é€Ÿåº¦ã€‚",
                category: "knowledge",
                icon: "activity",
                color: "from-green-400 to-lime-500",
                tags: ["ç”Ÿç‰©", "ç§‘æ™®", "ä»¿çœŸ"],
                date: "2023-10-25"
            },
            {
                id: 8,
                title: "è´ªåƒè›‡ (AI å¯¹æˆ˜ç‰ˆ)",
                desc: "ä¸æ˜¯ä½ ç©ï¼Œè€Œæ˜¯çœ‹ AI æ€ä¹ˆç©è´ªåƒè›‡ã€‚å®ƒä¼šè‡ªåŠ¨å¯»æ‰¾æœ€çŸ­è·¯å¾„åƒåˆ°è‹¹æœã€‚",
                category: "game",
                icon: "gamepad-2",
                color: "from-violet-500 to-fuchsia-500",
                tags: ["ç®—æ³•", "æ¸¸æˆ", "è§‚å¯Ÿ"],
                date: "2023-10-28"
            }
        ];

        const quotes = [
            "â€œçŸ¥è¯†ä¸æ˜¯ä¸ºäº†å‚¨å­˜ï¼Œè€Œæ˜¯ä¸ºäº†åˆ›é€ ã€‚â€",
            "â€œæ¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿï¼Œéƒ½æºäºä¸€ä¸ªç®€å•çš„å¼€å§‹ã€‚â€",
            "â€œä»£ç æ˜¯å†™ç»™æœºå™¨çš„æƒ…ä¹¦ï¼Œä¹Ÿæ˜¯å†™ç»™äººç±»çš„é€»è¾‘è¯—ã€‚â€",
            "â€œä»Šå¤©ä¹Ÿè¦ä¿æŒå¥½å¥‡å¿ƒå“¦ï¼â€",
            "â€œç”Ÿæ´»ä¸­çš„å°ç¡®å¹¸ï¼Œå¾€å¾€è—åœ¨ç»†èŠ‚çš„ä»£ç é‡Œã€‚â€"
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderProjects(projects);
            setupFilters();
            lucide.createIcons();
            document.getElementById('total-count').textContent = projects.length;
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('daily-quote').textContent = randomQuote;
        });

        function renderProjects(data) {
            const grid = document.getElementById('projects-grid');
            grid.innerHTML = '';
            if (data.length === 0) {
                document.getElementById('empty-state').classList.remove('hidden');
                return;
            } else {
                document.getElementById('empty-state').classList.add('hidden');
            }
            data.forEach(project => {
                const card = document.createElement('div');
                card.className = 'group bg-white rounded-2xl shadow-sm hover:shadow-xl border border-gray-100 overflow-hidden card-hover cursor-pointer flex flex-col';
                card.onclick = () => openModal(project);
                const tagsHtml = project.tags.map(tag => `<span class="text-[10px] px-2 py-1 bg-gray-100 text-gray-600 rounded-full font-medium">${tag}</span>`).join('');
                card.innerHTML = `
                    <div class="h-40 bg-gradient-to-br ${project.color} relative flex items-center justify-center overflow-hidden">
                        <div class="absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"></div>
                        <i data-lucide="${project.icon}" size="48" class="text-white drop-shadow-md transform group-hover:scale-110 transition-transform duration-500"></i>
                        <div class="absolute bottom-3 right-3 bg-white/20 backdrop-blur-md px-2 py-1 rounded text-white text-xs font-mono">
                            Click to Open
                        </div>
                    </div>
                    <div class="p-5 flex-1 flex flex-col">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-bold text-gray-800 group-hover:text-purple-600 transition-colors">${project.title}</h3>
                        </div>
                        <p class="text-gray-500 text-sm leading-relaxed mb-4 flex-1">${project.desc}</p>
                        <div class="flex items-center gap-2 mt-auto pt-4 border-t border-gray-50">
                            ${tagsHtml}
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            lucide.createIcons();
        }

        function setupFilters() {
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    buttons.forEach(b => {
                        b.classList.remove('bg-gray-900', 'text-white', 'shadow-lg');
                        b.classList.add('bg-white', 'text-gray-600', 'hover:bg-gray-50');
                    });
                    btn.classList.remove('bg-white', 'text-gray-600', 'hover:bg-gray-50');
                    btn.classList.add('bg-gray-900', 'text-white', 'shadow-lg');
                    const category = btn.dataset.category;
                    if (category === 'all') {
                        renderProjects(projects);
                    } else {
                        const filtered = projects.filter(p => p.category === category);
                        renderProjects(filtered);
                    }
                });
            });
        }

        function openModal(project) {
            const modal = document.getElementById('app-modal');
            const title = document.getElementById('modal-title');
            const icon = document.getElementById('modal-icon');
            const iframe = document.getElementById('project-iframe');
            const placeholder = document.getElementById('modal-content-placeholder');
            const mockContent = document.getElementById('mock-demo-content');
            const demoTitle = document.getElementById('demo-title');
            const demoDesc = document.getElementById('demo-desc');
            
            title.textContent = project.title;
            icon.innerHTML = `<i data-lucide="${project.icon}" size="24"></i>`;
            modal.classList.remove('hidden');
            lucide.createIcons();

            if (project.url) {
                iframe.src = project.url;
                iframe.classList.remove('hidden');
                placeholder.classList.add('hidden');
            } else {
                iframe.classList.add('hidden');
                iframe.src = ""; 
                placeholder.classList.remove('hidden');
                demoTitle.textContent = project.title;
                demoDesc.textContent = project.desc;
                mockContent.classList.add('hidden'); 
                setTimeout(() => {
                    mockContent.classList.remove('hidden');
                    mockContent.classList.add('animate-fade-in-up'); 
                }, 800);
            }
        }

        function closeModal() {
            const modal = document.getElementById('app-modal');
            modal.classList.add('hidden');
            const iframe = document.getElementById('project-iframe');
            if (iframe) iframe.src = "";
            
            // å¦‚æœæ­£åœ¨å½•åˆ¶ï¼Œå°è¯•åœæ­¢
            if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                toggleRecording(); // è¿™ä¼šè§¦å‘åœæ­¢
            }
        }

        function toggleFullscreen() {
            const elem = document.getElementById('app-modal').querySelector('.modal-animateing');
            if (!document.fullscreenElement) {
                elem.requestFullscreen().catch(err => {
                    alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                });
            } else {
                document.exitFullscreen();
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // --- å½•åˆ¶åŠŸèƒ½é€»è¾‘ ---
        let mediaRecorder;
        let recordedChunks = [];
        let isRecording = false;

        async function toggleRecording() {
            const btn = document.getElementById('record-btn');
            const btnText = document.getElementById('record-text');

            if (!isRecording) {
                // å¼€å§‹å½•åˆ¶
                try {
                    // è¯·æ±‚å±å¹•åˆ†äº«
                    const stream = await navigator.mediaDevices.getDisplayMedia({
                        video: { mediaSource: 'screen' }, // æˆ– 'tab'
                        audio: true
                    });

                    mediaRecorder = new MediaRecorder(stream);

                    mediaRecorder.ondataavailable = function(e) {
                        if (e.data.size > 0) {
                            recordedChunks.push(e.data);
                        }
                    };

                    mediaRecorder.onstop = function() {
                        // åœæ­¢åç”Ÿæˆæ–‡ä»¶
                        const blob = new Blob(recordedChunks, {
                            type: "video/webm"
                        });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement("a");
                        document.body.appendChild(a);
                        a.style = "display: none";
                        a.href = url;
                        a.download = "gemini-inspiration-recording.webm"; // ä¸‹è½½æ–‡ä»¶å
                        a.click();
                        window.URL.revokeObjectURL(url);
                        
                        // é‡ç½®çŠ¶æ€
                        recordedChunks = [];
                        isRecording = false;
                        resetRecordButton(btn, btnText);
                        
                        // åœæ­¢æ‰€æœ‰è½¨é“ï¼ˆå…³é—­æµè§ˆå™¨åˆ†äº«æ¡ï¼‰
                        stream.getTracks().forEach(track => track.stop());
                    };

                    // ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨è‡ªå¸¦çš„â€œåœæ­¢å…±äº«â€æ¡æ—¶è§¦å‘
                    stream.getVideoTracks()[0].onended = function() {
                        if (mediaRecorder.state !== 'inactive') {
                            mediaRecorder.stop();
                        }
                    };

                    mediaRecorder.start();
                    isRecording = true;
                    
                    // æ›´æ–° UI ä¸ºå½•åˆ¶ä¸­çŠ¶æ€
                    btn.classList.remove('text-gray-500', 'hover:bg-purple-50', 'hover:text-purple-600');
                    btn.classList.add('text-red-600', 'bg-red-50', 'border-red-100');
                    btnText.innerHTML = '<span class="recording-dot"></span>åœæ­¢å½•åˆ¶';

                } catch (err) {
                    console.error("Error: " + err);
                    // ç”¨æˆ·å–æ¶ˆé€‰æ‹©æ—¶é€šå¸¸ä¼šæŠ›å‡º NotAllowedError
                    if (err.name !== 'NotAllowedError') {
                        alert("æ— æ³•å¯åŠ¨å½•åˆ¶ã€‚è¯·ç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯ HTTPS æˆ– localhost ç¯å¢ƒï¼Œä¸”æµè§ˆå™¨æ”¯æŒå±å¹•å½•åˆ¶ã€‚");
                    }
                }
            } else {
                // åœæ­¢å½•åˆ¶
                if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                    mediaRecorder.stop();
                }
            }
        }

        function resetRecordButton(btn, btnText) {
            btn.classList.remove('text-red-600', 'bg-red-50', 'border-red-100');
            btn.classList.add('text-gray-500', 'hover:bg-purple-50', 'hover:text-purple-600');
            btnText.innerHTML = 'å½•åˆ¶è§†é¢‘';
        }
    </script>
</body>
</html>